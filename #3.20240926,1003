#include <stdio.h>

int main() {
    int stock[5] = {0, 0, 0, 0, 0};
    int sold[5]  = {0, 0, 0, 0, 0};
    int menu;
    int sel;
    int id;
    int amount;

    while (1) {
        printf("\n[쇼핑몰 관리 프로그램]\n");
        printf("원하는 메뉴를 선택하세요.(1. 입고, 2. 판매, 3. 상품현황, 4. 종료)\n> ");
        scanf("%d", &menu);

        if (menu == 1) {
            printf("입고수량 입력 : 전체 상품 입고수량 입력 1, 개별 상품 입력 2를 선택\n> ");
            scanf("%d", &sel);

            if (sel == 1) {
                printf("전체 상품 입고수량 5개를 순서대로 입력하세요.\n> ");
                for (int i = 0; i < 5; i++) {
                    scanf("%d", &amount);
                    stock[i] += amount;
                }
            } else if (sel == 2) {
                printf("상품 ID(0~4)를 입력하세요.\n> ");
                scanf("%d", &id);
                if (id < 0 || id > 4) {
                    printf("잘못된 상품 ID 입니다.\n");
                    continue;
                }
                printf("입고수량을 입력하세요.\n> ");
                scanf("%d", &amount);
                stock[id] += amount;
            } else {
                printf("잘못된 선택입니다.\n");
            }
        }

        else if (menu == 2) {
            printf("판매수량 입력 : 전체 상품 판매수량 입력 1, 개별 상품 입력 2를 선택\n> ");
            scanf("%d", &sel);

            if (sel == 1) {
                printf("전체 상품 판매수량 5개를 순서대로 입력하세요.\n> ");
                for (int i = 0; i < 5; i++) {
                    scanf("%d", &amount);
                    if (amount <= stock[i]) {
                        stock[i] -= amount;
                        sold[i]  += amount;
                    } else {
                        printf("상품 %d 재고 부족(현재 재고 %d개), 판매 불가\n", i, stock[i]);
                    }
                }
            } else if (sel == 2) {
                printf("상품 ID(0~4)를 입력하세요.\n> ");
                scanf("%d", &id);
                if (id < 0 || id > 4) {
                    printf("잘못된 상품 ID 입니다.\n");
                    continue;
                }
                printf("판매수량을 입력하세요.\n> ");
                scanf("%d", &amount);

                if (amount <= stock[id]) {
                    stock[id] -= amount;
                    sold[id]  += amount;
                } else {
                    printf("재고 부족(현재 재고 %d개), 판매 불가\n", stock[id]);
                }
            } else {
                printf("잘못된 선택입니다.\n");
            }
        }

        else if (menu == 3) {
            int total_stock = 0;
            int total_sold  = 0;
            for (int i = 0; i < 5; i++) {
                total_stock += stock[i];
                total_sold  += sold[i];
            }

            double rate = 0.0;
            if (total_stock + total_sold > 0) {
                rate = (double)total_sold / (total_stock + total_sold) * 100.0;
            }

            int max_idx = 0;
            int max_val = sold[0];
            for (int i = 1; i < 5; i++) {
                if (sold[i] > max_val) {
                    max_val = sold[i];
                    max_idx = i;
                }
            }

            int min_idx = -1;
            int min_val = 0;
            for (int i = 0; i < 5; i++) {
                if (sold[i] > 0) {
                    if (min_idx == -1 || sold[i] < min_val) {
                        min_val = sold[i];
                        min_idx = i;
                    }
                }
            }

            printf("\n재고수량 : ");
            for (int i = 0; i < 5; i++) {
                printf("%d ", stock[i]);
            }
            printf("\n총 판매량 : %d (판매율 %.2f%%)\n", total_sold, rate);

            if (total_sold > 0) {
                printf("가장 많이 판매된 상품 : ID %d, 판매량 %d\n", max_idx, sold[max_idx]);
                if (min_idx != -1) {
                    printf("가장 적게 판매된 상품 : ID %d, 판매량 %d\n", min_idx, sold[min_idx]);
                }
            }

            for (int i = 0; i < 5; i++) {
                if (stock[i] <= 2) {
                    printf("상품 ID %d : 재고부족(%d)\n", i, stock[i]);
                }
            }
        }

        else if (menu == 4) {
            printf("프로그램을 종료합니다.\n");
            break;
        }

        else {
            printf("메뉴를 잘못 선택했습니다.\n");
        }
    }

    return 0;
}
